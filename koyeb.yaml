name: autosam-backend
service:
  name: express-server
  runtime: docker
  docker:
    dockerfile: server/Dockerfile
    context: server/
  env:
    - name: NODE_ENV
      value: production
    - name: PORT
      value: "5000"
  regions:
    - fra
  instance_types:
    - nano
  scalings:
    min: 1
    max: 1
  ports:
    - port: 5000
      http: true
      protocol: http
  healthchecks:
    - port: 5000
      http:
        path: /api/health
      grace_period: 30
      interval: 15
      timeout: 5
      unhealthy_threshold: 3
      healthy_threshold: 1
